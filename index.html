<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ù‚Ø±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ± Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠØ© ğŸª™ğŸµ</title>
    <style>
        /* (Ù†ÙØ³ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø±Ø§Ø¦Ø¹ Ø§Ù„Ø³Ø§Ø¨Ù‚ Ù…Ø¹ ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¨Ø³ÙŠØ·Ø©) */
        body {
            margin: 0; height: 100vh; display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%; animation: gradient 15s ease infinite;
            color: white; overflow: hidden; user-select: none;
        }
        @keyframes gradient { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        
        #score-container { background: rgba(0, 0, 0, 0.3); padding: 10px 40px; border-radius: 50px; backdrop-filter: blur(10px); margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        h1 { font-size: 3.5rem; margin: 0; color: #fff; text-shadow: 2px 2px 10px rgba(0,0,0,0.3); }

        #coin {
            width: 200px; height: 200px; background: radial-gradient(circle, #f1c40f, #d4ac0d);
            border-radius: 50%; display: flex; justify-content: center; align-items: center;
            font-size: 6rem; cursor: pointer; box-shadow: 0 15px 0 #b7950b, 0 20px 50px rgba(0,0,0,0.4);
            transition: transform 0.05s; border: 10px solid #f39c12;
        }
        #coin:active { transform: scale(0.95) translateY(10px); box-shadow: 0 5px 0 #b7950b; }

        #shop-btn { margin-top: 30px; padding: 15px 40px; background: #fff; color: #e73c7e; border: none; border-radius: 30px; font-weight: bold; cursor: pointer; }

        #shop-menu {
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: white; color: #333; padding: 25px; border-radius: 25px; width: 300px; z-index: 100;
        }
        .upgrade-item { display: flex; justify-content: space-between; align-items: center; background: #f8f9fa; margin: 10px 0; padding: 12px; border-radius: 15px; }
        .buy-btn { background: #23a6d5; color: white; border: none; padding: 8px 15px; border-radius: 10px; cursor: pointer; }
        .buy-btn:disabled { background: #ccc; }

        .plus-one { position: absolute; color: white; font-size: 2.5rem; font-weight: bold; animation: floatUp 0.7s forwards; }
        @keyframes floatUp { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-150px); opacity: 0; } }
    </style>
</head>
<body onload="loadGame()">

    <audio id="clickSound" src="https://www.soundjay.com/buttons/sounds/button-37.mp3"></audio>
    <audio id="buySound" src="https://www.soundjay.com/buttons/sounds/button-09.mp3"></audio>
    <audio id="errorSound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>

    <div id="score-container">
        <h1>ğŸ’° <span id="score">0</span></h1>
    </div>
    <div style="margin-bottom: 20px; font-weight: bold;">Ù‚ÙˆØ© Ø§Ù„Ù†Ù‚Ø±Ø©: <span id="click-power">1</span> âš”ï¸</div>

    <div id="coin" onclick="clickCoin(event)">ğŸª™</div>

    <button id="shop-btn" onclick="toggleShop()">ğŸ›’ ÙØªØ­ Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠ</button>
    <p onclick="resetGame()" style="font-size: 0.8rem; margin-top: 20px; cursor: pointer; opacity: 0.7;">Ø­Ø°Ù Ø§Ù„ØªÙ‚Ø¯Ù… ÙˆØ§Ù„Ø¨Ø¯Ø¡ Ù…Ù† Ø¬Ø¯ÙŠØ¯</p>

    <div id="shop-menu">
        <h2 style="text-align: center; color: #e73c7e;">Ø§Ù„Ù…ØªØ¬Ø± âš”ï¸</h2>
        <div id="upgrades-list"></div>
        <button onclick="toggleShop()" style="width: 100%; margin-top: 15px; background: #eee; border: none; padding: 10px; border-radius: 10px; cursor: pointer;">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>

    <script>
        let score = 0;
        let clickPower = 1;
        let upgrades = [
            { id: 0, name: "Ø®Ù†Ø¬Ø± Ù‚Ø¯ÙŠÙ…", cost: 50, power: 1, level: 0 },
            { id: 1, name: "Ø³ÙŠÙ Ù†Ø­Ø§Ø³ÙŠ", cost: 250, power: 5, level: 0 },
            { id: 2, name: "ÙØ£Ø³ Ø§Ù„Ù…Ø­Ø§Ø±Ø¨", cost: 1000, power: 20, level: 0 }
        ];

        const clickSnd = document.getElementById('clickSound');
        const buySnd = document.getElementById('buySound');
        const errSnd = document.getElementById('errorSound');

        function clickCoin(event) {
            score += clickPower;
            
            // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ù†Ù‚Ø±Ø©
            clickSnd.currentTime = 0;
            clickSnd.play();

            showEffect(event);
            updateUI();
            saveGame();
        }

        function buyUpgrade(index) {
            let up = upgrades[index];
            if (score >= up.cost) {
                score -= up.cost;
                clickPower += up.power;
                up.level++;
                up.cost = Math.floor(up.cost * 1.7);
                
                // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ø´Ø±Ø§Ø¡
                buySnd.play();
                
                updateUI();
                saveGame();
            } else {
                // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ø®Ø·Ø£ Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ù…Ø§Ù„ ÙƒØ§ÙÙ
                errSnd.play();
                alert("Ø¬Ù…Ø¹ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø°Ù‡Ø¨ Ø£ÙˆÙ„Ø§Ù‹!");
            }
        }

        function toggleShop() {
            const menu = document.getElementById('shop-menu');
            menu.style.display = (menu.style.display === 'block') ? 'none' : 'block';
            renderShop();
        }

        function renderShop() {
            const list = document.getElementById('upgrades-list');
            list.innerHTML = upgrades.map((up, index) => `
                <div class="upgrade-item">
                    <div><b>${up.name}</b> (Lvl ${up.level})<br><small>Ø§Ù„Ø³Ø¹Ø±: ${up.cost} ğŸ’°</small></div>
                    <button class="buy-btn" ${score < up.cost ? 'disabled' : ''} onclick="buyUpgrade(${index})">ØªØ·ÙˆÙŠØ±</button>
                </div>
            `).join('');
        }

        function showEffect(e) {
            const plus = document.createElement('div');
            plus.innerText = `+${clickPower}`;
            plus.className = 'plus-one';
            plus.style.left = e.pageX + 'px';
            plus.style.top = e.pageY + 'px';
            document.body.appendChild(plus);
            setTimeout(() => plus.remove(), 700);
        }

        function updateUI() {
            document.getElementById('score').innerText = Math.floor(score);
            document.getElementById('click-power').innerText = clickPower;
            if (document.getElementById('shop-menu').style.display === 'block') renderShop();
        }

        function saveGame() {
            const data = { score, clickPower, upgrades };
            localStorage.setItem('legendClicker_v2', JSON.stringify(data));
        }

        function loadGame() {
            const saved = localStorage.getItem('legendClicker_v2');
            if (saved) {
                const data = JSON.parse(saved);
                score = data.score;
                clickPower = data.clickPower;
                upgrades = data.upgrades;
                updateUI();
            }
        }

        function resetGame() {
            if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ Ø³ØªØ¨Ø¯Ø£ Ù…Ù† Ø§Ù„ØµÙØ±!")) {
                localStorage.removeItem('legendClicker_v2');
                location.reload();
            }
        }
    </script>
</body>
</html>

