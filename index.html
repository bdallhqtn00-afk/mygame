<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…ØºØ§Ù…Ø±Ø© Ø§Ù„Ù…Ù„ÙŠØ§Ø± âš”ï¸ğŸ’°</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&display=swap');
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            margin: 0; height: 100vh; display: flex; flex-direction: column;
            align-items: center; justify-content: space-around;
            font-family: 'Cairo', sans-serif; overflow: hidden; user-select: none;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%; animation: gradientBG 15s ease infinite;
        }
        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        /* Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¶Ø¨Ø· Ø§Ù„ØµØºÙŠØ± ÙˆØ§Ù„Ø¨Ø¹ÙŠØ¯ */
        .reset-btn {
            position: fixed; top: 10px; left: 10px;
            padding: 5px 10px; background: rgba(220, 38, 38, 0.4);
            color: white; border: 1px solid rgba(255,255,255,0.2);
            border-radius: 5px; font-size: 0.6rem; cursor: pointer;
            transition: 0.3s; z-index: 1000;
        }
        .reset-btn:hover { background: rgba(220, 38, 38, 1); }

        .info-bar {
            width: 90%; background: rgba(0,0,0,0.6); padding: 15px;
            border-radius: 20px; text-align: center; border: 2px solid #fbbf24; color: white;
        }
        #score { font-size: 3.5rem; color: #fbbf24; margin: 0; line-height: 1; }
        .timer { font-size: 0.8rem; color: #ddd; }

        .main-btn {
            width: 200px; height: 200px; border-radius: 50%;
            background: radial-gradient(circle, #fcd34d, #b45309);
            border: 8px solid #78350f; cursor: pointer;
            box-shadow: 0 15px 0 #451a03, 0 20px 40px rgba(0,0,0,0.4);
            display: flex; align-items: center; justify-content: center;
            font-size: 6rem; transition: transform 0.05s;
        }
        .main-btn:active { transform: translateY(10px); box-shadow: 0 5px 0 #451a03; }

        .open-shop-btn {
            padding: 15px 40px; background: #fbbf24; color: #000;
            border: none; border-radius: 50px; font-weight: 900;
            font-size: 1.2rem; cursor: pointer;
        }

        .shop-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 100; flex-direction: column; align-items: center; padding-top: 50px;
        }
        .shop-content { width: 90%; max-width: 400px; }
        .upgrade-card {
            background: #1e293b; margin: 10px 0; padding: 15px;
            border-radius: 15px; display: flex; justify-content: space-between;
            align-items: center; border: 1px solid #334155;
        }
        .buy-btn { background: #fbbf24; color: #000; border: none; padding: 10px; border-radius: 10px; font-weight: bold; }

        .floating { position: absolute; color: white; font-size: 2.5rem; font-weight: 900; animation: floatUp 0.7s forwards; pointer-events: none; }
        @keyframes floatUp { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-150px); opacity: 0; } }
    </style>
</head>
<body onload="init()">

    <button class="reset-btn" onclick="resetGame()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨ Ù…Ù† Ø§Ù„ØµÙØ± âš ï¸</button>

    <audio id="snd-tap" src="https://www.myinstants.com/media/sounds/coin-drop-1.mp3"></audio>
    <audio id="snd-buy" src="https://www.myinstants.com/media/sounds/duck-quack_1.mp3"></audio>

    <div class="info-bar">
        <div id="score">0</div>
        <div class="timer">ÙˆÙ‚Øª Ø§Ù„Ù„Ø¹Ø¨: <span id="game-time">00:00</span></div>
        <div style="font-size:0.8rem">Ø§Ù„Ù‚ÙˆØ©: <span id="pwr-display">1</span> âš”ï¸</div>
    </div>

    <div class="main-btn" onclick="handleTap(event)">ğŸª™</div>

    <button class="open-shop-btn" onclick="toggleShop(true)">ğŸ›’ ÙØªØ­ Ø§Ù„Ù…ØªØ¬Ø±</button>

    <div id="shop" class="shop-overlay">
        <h2 style="color:#fbbf24">Ù…ØªØ¬Ø± Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ±</h2>
        <div class="shop-content" id="shop-items"></div>
        <button onclick="toggleShop(false)" style="margin-top:20px; background:white; padding:10px 30px; border-radius:10px; border:none;">Ø¹ÙˆØ¯Ø© Ù„Ù„Ø¹Ø¨</button>
    </div>

    <script>
        let gold = 0, pwr = 1, let gold = 1000000, pwr = 3500, seconds = 0;

        let upgrades = [
            { name: "Ø®Ù†Ø¬Ø± Ø®Ø´Ø¨ÙŠ", cost: 50, gain: 2, req: 0 },
            { name: "Ø³ÙŠÙ ÙÙˆÙ„Ø§Ø°ÙŠ", cost: 500, gain: 10, req: 1000 },
            { name: "ÙØ£Ø³ Ø°Ù‡Ø¨ÙŠ", cost: 5000, gain: 50, req: 10000 },
            { name: "Ø¯Ø±Ø¹ Ø§Ù„Ù…Ù„ÙŠØ§Ø±", cost: 100000, gain: 500, req: 50000 }
        ];

        function init() {
            load();
            setInterval(() => { seconds++; updateTimer(); }, 1000);
            render();
        }

        function handleTap(e) {
            gold += pwr;
            document.getElementById('snd-tap').currentTime = 0;
            document.getElementById('snd-tap').play().catch(()=>{});
            
            const f = document.createElement('div');
            f.className = 'floating'; f.innerText = `+${pwr}`;
            f.style.left = e.pageX + 'px'; f.style.top = e.pageY + 'px';
            document.body.appendChild(f);
            setTimeout(()=>f.remove(), 700);

            render(); save();
        }

        function buy(i) {
            if (gold >= upgrades[i].cost) {
                gold -= upgrades[i].cost;
                pwr += upgrades[i].gain;
                upgrades[i].cost = Math.floor(upgrades[i].cost * 2);
                document.getElementById('snd-buy').play().catch(()=>{});
                render(); save();
            }
        }

        function resetGame() {
            if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ Ø³ØªÙ…Ø³Ø­ ÙƒÙ„ Ø°Ù‡Ø¨Ùƒ ÙˆØªØ·ÙˆÙŠØ±Ø§ØªÙƒ Ù„ØªØ¨Ø¯Ø£ Ù…Ù† Ø¬Ø¯ÙŠØ¯!")) {
                localStorage.removeItem('billion_game');
                location.reload();
            }
        }

        function toggleShop(show) { document.getElementById('shop').style.display = show ? 'flex' : 'none'; }

        function updateTimer() {
            let m = Math.floor(seconds / 60), s = seconds % 60;
            document.getElementById('game-time').innerText = `${m}:${s < 10 ? '0' + s : s}`;
        }

        function render() {
            document.getElementById('score').innerText = Math.floor(gold);
            document.getElementById('pwr-display').innerText = pwr;
            let html = "";
            upgrades.forEach((u, i) => {
                html += `
                    <div class="upgrade-card" style="${gold < u.req ? 'opacity:0.3' : ''}">
                        <div style="color:white">
                            <b>${u.name}</b><br>
                            <small>${u.cost} ğŸ’° | +${u.gain} Ù‚ÙˆØ©</small>
                        </div>
                        <button class="buy-btn" onclick="buy(${i})" ${gold < u.cost ? 'disabled' : ''}>ØªØ·ÙˆÙŠØ±</button>
                    </div>
                `;
            });
            document.getElementById('shop-items').innerHTML = html;
        }

        function save() { localStorage.setItem('billion_game', JSON.stringify({gold, pwr, upgrades, seconds})); }
        function load() {
            const d = JSON.parse(localStorage.getItem('billion_game'));
            if(d) {
                gold = d.gold; pwr = d.pwr; seconds = d.seconds || 0;
                if(d.upgrades) upgrades = d.upgrades;
            }
        }
    </script>
</body>
</html>
