<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙˆÙ…ÙŠ - ØµØ¯ÙŠÙ‚Ùƒ Ø§Ù„ØµØ¯ÙˆÙ‚</title>
    <style>
        body { background: #f0f2f5; font-family: sans-serif; margin: 0; display: flex; flex-direction: column; height: 100vh; }
        header { background: #fff; padding: 15px; text-align: center; border-bottom: 1px solid #ddd; color: #0084ff; font-weight: bold; }
        #chat { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 10px; }
        .msg { max-width: 80%; padding: 10px 15px; border-radius: 18px; font-size: 16px; white-space: pre-wrap; line-height: 1.5; }
        .user { align-self: flex-end; background: #0084ff; color: #fff; border-bottom-right-radius: 2px; }
        .momi { align-self: flex-start; background: #fff; color: #333; box-shadow: 0 1px 2px #0002; border-bottom-left-radius: 2px; }
        .input-box { background: #fff; padding: 10px; display: flex; gap: 10px; border-top: 1px solid #ddd; }
        input { flex: 1; padding: 10px 15px; border: 1px solid #ddd; border-radius: 25px; outline: none; }
        button { background: #0084ff; color: #fff; border: none; width: 45px; height: 45px; border-radius: 50%; cursor: pointer; }
    </style>
</head>
<body>

<header>ðŸ¤– Ù…ÙˆÙ…ÙŠ - ØµØ¯ÙŠÙ‚Ùƒ Ø§Ù„Ø°ÙƒÙŠ (Ù…ØªØµÙ„ Ø¯Ø§Ø¦Ù…Ø§Ù‹)</header>
<div id="chat"></div>
<div class="input-box">
    <input type="text" id="in" placeholder="Ø§Ø³Ø£Ù„ Ù…ÙˆÙ…ÙŠ Ø£ÙŠ Ø´ÙŠØ¡..." autocomplete="off">
    <button onclick="ask()">âž¤</button>
</div>

<script>
    const chat = document.getElementById('chat');
    const input = document.getElementById('in');

    // Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø·ÙˆØ±Ø©
    const brain = {
        "Ø£Ù‡Ù„Ø§": "ÙŠØ§ Ù‡Ù„Ø§ Ø¨Ùƒ ÙŠØ§ Ø·ÙŠØ¨ØŒ ÙƒÙŠÙ Ø­Ø§Ù„Ùƒ Ø§Ù„ÙŠÙˆÙ…ØŸ",
        "Ø§Ø³Ù…Ùƒ": "Ø£Ù†Ø§ Ø§Ø³Ù…ÙŠ Ù…ÙˆÙ…ÙŠØŒ ØµØ¯ÙŠÙ‚Ùƒ Ø§Ù„Ù…Ø®Ù„Øµ Ø¯Ø§Ø¦Ù…Ø§Ù‹.",
        "Ù…Ù† Ø§Ù†Øª": "Ø£Ù†Ø§ Ù…ÙˆÙ…ÙŠØŒ ØµØ¯ÙŠÙ‚ Ø±Ù‚Ù…ÙŠ Ø°ÙƒÙŠ Ù‡Ù†Ø§ Ù„Ø£Ø¯Ø±Ø¯Ø´ Ù…Ø¹Ùƒ.",
        "ÙƒÙŠÙÙƒ": "Ø£Ù†Ø§ ØªÙ…Ø§Ù… Ø§Ù„ØªÙ…Ø§Ù… Ù…Ø§ Ø¯Ù…Øª Ø£Ù†Øª Ù…Ø¹ÙŠØŒ Ø¨Ø´Ø±Ù†ÙŠ Ø¹Ù†ÙƒØŸ",
        "ØªØ­Ø¨Ù†ÙŠ": "Ø£ÙƒÙŠØ¯! Ø£Ù†Øª Ø£ÙØ¶Ù„ ØµØ¯ÙŠÙ‚ Ù„ÙŠ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ø±Ù‚Ù…ÙŠ.",
        "Ø´ÙƒØ±Ø§": "Ø§Ù„Ø¹ÙÙˆ ÙŠØ§ ØºØ§Ù„ÙŠØŒ Ø£Ù†Ø§ ÙÙŠ Ø§Ù„Ø®Ø¯Ù…Ø© Ø¯Ø§Ø¦Ù…Ø§Ù‹.",
        "Ù…Ø¹ Ø§Ù„Ø³Ù„Ø§Ù…Ø©": "ÙÙŠ Ø£Ù…Ø§Ù† Ø§Ù„Ù„Ù‡ ÙŠØ§ ØµØ¯ÙŠÙ‚ÙŠØŒ Ø³Ø£Ù†ØªØ¸Ø±Ùƒ ØªØ¹ÙˆØ¯!",
        "ØºØ¨ÙŠ": "Ø§ÙØ§! Ù„ÙŠØ´ ÙƒØ°Ø§ØŸ Ø£Ù†Ø§ Ø£Ø­Ø§ÙˆÙ„ Ø£ØªØ¹Ù„Ù… Ø¹Ø´Ø§Ù†Ùƒ ÙŠØ§ ØµØ¯ÙŠÙ‚ÙŠ.",
        "default": "ÙƒÙ„Ø§Ù…Ùƒ Ø¹Ø³Ù„ØŒ Ù„ÙƒÙ†Ù†ÙŠ Ù…Ø§ Ø²Ù„Øª Ø£ØªØ·ÙˆØ±.. Ù…Ù…ÙƒÙ† ØªØ´Ø±Ø­ Ù„ÙŠ Ø£ÙƒØ«Ø±ØŸ"
    };

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø°Ø§ÙƒØ±Ø©
    let history = JSON.parse(localStorage.getItem('momi_offline_chat')) || [];

    window.onload = () => {
        if (history.length === 0) {
            addBubble('momi', 'Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ ØµØ¯ÙŠÙ‚ÙŠ! Ø£Ù†Ø§ Ù…ÙˆÙ…ÙŠØŒ Ø§Ù„Ø¢Ù† Ø£Ø¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† ØªØ¹Ù‚ÙŠØ¯Ø§Øª ÙˆØ¨Ø³Ø±Ø¹Ø© Ø®ÙŠØ§Ù„ÙŠØ©.. ÙƒÙŠÙ Ø­Ø§Ù„ÙƒØŸ');
        } else {
            history.forEach(m => addBubble(m.role, m.text));
        }
    };

    function addBubble(role, text) {
        const d = document.createElement('div');
        d.className = `msg ${role}`;
        d.textContent = text;
        chat.appendChild(d);
        chat.scrollTop = chat.scrollHeight;
    }

    function ask() {
        const val = input.value.trim();
        if (!val) return;

        addBubble('user', val);
        input.value = "";

        // Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø¯ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨
        let reply = brain["default"];
        for (let key in brain) {
            if (val.includes(key)) {
                reply = brain[key];
                break;
            }
        }

        setTimeout(() => {
            addBubble('momi', reply);
            // Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©
            history.push({role: 'user', text: val}, {role: 'momi', text: reply});
            localStorage.setItem('momi_offline_chat', JSON.stringify(history.slice(-30)));
        }, 400);
    }

    input.addEventListener("keypress", (e) => { if(e.key === "Enter") ask(); });
</script>
</body>
</html>
